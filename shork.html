
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1">
    <meta name="viewport"
          content="width=device-width, initial-scale=1,minimum-scale=1, maximum-scale=1, user-scalable=no">
    <link rel="shortcut icon" href="../img/logo.png">
    <link href="../css/util.css" rel="stylesheet" type="text/css"/>
    <title>$Title$</title>
    <style>
        * {
            moz-user-select: -moz-none;
            -moz-user-select: none;
            -o-user-select: none;
            -khtml-user-select: none;
            -webkit-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
    </style>
</head>
<body>
<script>
    if (window.DeviceMotionEvent) {
    window.addEventListener('devicemotion', deviceMotionHandler, false);
}
var vibrateSupport = "vibrate" in navigator
if (vibrateSupport) { //兼容不同的浏览器
    navigator.vibrate = navigator.vibrate || navigator.webkitVibrate || navigator.mozVibrate || navigator.msVibrate;
}
    function deviceMotionHandler(eventData) {
        var acceleration = eventData.accelerationIncludingGravity;
        var currTime = new Date().getTime();
        var diffTime = currTime - last_update;
        console.info(diffTime);
        if (diffTime > 100) {
            last_update = currTime;
            x = acceleration.x;
            y = acceleration.y;
            z = acceleration.z;
            var speed = Math.abs(x + y + z - last_x - last_y - last_z) / diffTime * 30000;
            console.info(speed);
            if (speed > SHAKE_THRESHOLD) {
                //要一摇之后进行业务逻辑处理
                doResult();
            }


            last_x = x;
            last_y = y;
            last_z = z;

        }
</script>

</body>
</html>