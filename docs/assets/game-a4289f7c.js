var Y=Object.defineProperty;var j=(n,t,e)=>t in n?Y(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var h=(n,t,e)=>(j(n,typeof t!="symbol"?t+"":t,e),e);import{r as E,o as R,M as O,w as Q,N as X,O as Z,P as J,b as d,c as M,d as y,Q as tt,R as T,l as _,g as k,S as et,U as nt,V as ot,W as N,X as P,n as st,u as lt,e as it,Y as at,m as W,p as ct,Z as rt,_ as ut,$,a0 as dt,a1 as ht,a2 as ft,h as mt,x as gt,s as pt,t as F,a3 as bt,y as vt,z as wt,q as Bt,a4 as yt}from"./index-9960dca2.js";import{o as kt,a as xt,p as St,b as Ct,P as Gt,c as Tt,m as Pt,u as It,_ as Et}from"./_plugin-vue_export-helper-12947d5b.js";const Mt=(n,t)=>{const e=E(),o=()=>{e.value=J(n).height};return R(()=>{if(O(o),t)for(let s=1;s<=3;s++)setTimeout(o,100*s)}),kt(()=>O(o)),Q([X,Z],o),e};function _t(n,t){const e=Mt(n,!0);return o=>d("div",{class:t("placeholder"),style:{height:e.value?`${e.value}px`:void 0}},[o()])}const[L,A]=M("action-bar"),H=Symbol(L),Ot={placeholder:Boolean,safeAreaInsetBottom:T};var Nt=y({name:L,props:Ot,setup(n,{slots:t}){const e=E(),o=_t(e,A),{linkChildren:s}=tt(H);s();const l=()=>{var u;return d("div",{ref:e,class:[A(),{"van-safe-area-bottom":n.safeAreaInsetBottom}]},[(u=t.default)==null?void 0:u.call(t)])};return()=>n.placeholder?o(l):l()}});const $t=_(Nt),[At,Dt]=M("action-bar-button"),Rt=k({},et,{type:String,text:String,icon:String,color:String,loading:Boolean,disabled:Boolean});var Wt=y({name:At,props:Rt,setup(n,{slots:t}){const e=nt(),{parent:o,index:s}=ot(H),l=N(()=>{if(o){const i=o.children[s.value-1];return!(i&&"isButton"in i)}}),u=N(()=>{if(o){const i=o.children[s.value+1];return!(i&&"isButton"in i)}});return xt({isButton:!0}),()=>{const{type:i,icon:g,text:p,color:x,loading:S,disabled:C}=n;return d(P,{class:Dt([i,{last:u.value,first:l.value}]),size:"large",type:i,icon:g,color:x,loading:S,disabled:C,onClick:e},{default:()=>[t.default?t.default():p]})}}});const D=_(Wt),[Ft,m,B]=M("dialog"),Lt=k({},St,{title:String,theme:String,width:st,message:[String,Function],callback:Function,allowHtml:Boolean,className:lt,transition:it("van-dialog-bounce"),messageAlign:String,closeOnPopstate:T,showCancelButton:Boolean,cancelButtonText:String,cancelButtonColor:String,cancelButtonDisabled:Boolean,confirmButtonText:String,confirmButtonColor:String,confirmButtonDisabled:Boolean,showConfirmButton:T,closeOnClickOverlay:Boolean}),Ht=[...Ct,"transition","closeOnPopstate"];var z=y({name:Ft,props:Lt,emits:["confirm","cancel","keydown","update:show"],setup(n,{emit:t,slots:e}){const o=E(),s=at({confirm:!1,cancel:!1}),l=r=>t("update:show",r),u=r=>{var f;l(!1),(f=n.callback)==null||f.call(n,r)},i=r=>()=>{n.show&&(t(r),n.beforeClose?(s[r]=!0,Tt(n.beforeClose,{args:[r],done(){u(r),s[r]=!1},canceled(){s[r]=!1}})):u(r))},g=i("cancel"),p=i("confirm"),x=ut(r=>{var f,b;if(r.target!==((b=(f=o.value)==null?void 0:f.popupRef)==null?void 0:b.value))return;({Enter:n.showConfirmButton?p:$,Escape:n.showCancelButton?g:$})[r.key](),t("keydown",r)},["enter","esc"]),S=()=>{const r=e.title?e.title():n.title;if(r)return d("div",{class:m("header",{isolated:!n.message&&!e.default})},[r])},C=r=>{const{message:f,allowHtml:b,messageAlign:v}=n,w=m("message",{"has-title":r,[v]:v}),G=dt(f)?f():f;return b&&typeof G=="string"?d("div",{class:w,innerHTML:G},null):d("div",{class:w},[G])},K=()=>{if(e.default)return d("div",{class:m("content")},[e.default()]);const{title:r,message:f,allowHtml:b}=n;if(f){const v=!!(r||e.title);return d("div",{key:b?1:0,class:m("content",{isolated:!v})},[C(v)])}},U=()=>d("div",{class:[ft,m("footer")]},[n.showCancelButton&&d(P,{size:"large",text:n.cancelButtonText||B("cancel"),class:m("cancel"),style:{color:n.cancelButtonColor},loading:s.cancel,disabled:n.cancelButtonDisabled,onClick:g},null),n.showConfirmButton&&d(P,{size:"large",text:n.confirmButtonText||B("confirm"),class:[m("confirm"),{[ht]:n.showCancelButton}],style:{color:n.confirmButtonColor},loading:s.confirm,disabled:n.confirmButtonDisabled,onClick:p},null)]),V=()=>d($t,{class:m("footer")},{default:()=>[n.showCancelButton&&d(D,{type:"warning",text:n.cancelButtonText||B("cancel"),class:m("cancel"),color:n.cancelButtonColor,loading:s.cancel,disabled:n.cancelButtonDisabled,onClick:g},null),n.showConfirmButton&&d(D,{type:"danger",text:n.confirmButtonText||B("confirm"),class:m("confirm"),color:n.confirmButtonColor,loading:s.confirm,disabled:n.confirmButtonDisabled,onClick:p},null)]}),q=()=>e.footer?e.footer():n.theme==="round-button"?V():U();return()=>{const{width:r,title:f,theme:b,message:v,className:w}=n;return d(Gt,W({ref:o,role:"dialog",class:[m([b]),w],style:{width:rt(r)},tabindex:0,"aria-labelledby":f||v,onKeydown:x,"onUpdate:show":l},ct(n,Ht)),{default:()=>[S(),K(),q()]})}}});let I;const zt={title:"",width:"",theme:null,message:"",overlay:!0,callback:null,teleport:"body",className:"",allowHtml:!1,lockScroll:!0,transition:void 0,beforeClose:null,overlayClass:"",overlayStyle:void 0,messageAlign:"",cancelButtonText:"",cancelButtonColor:null,cancelButtonDisabled:!1,confirmButtonText:"",confirmButtonColor:null,confirmButtonDisabled:!1,showConfirmButton:!0,showCancelButton:!1,closeOnPopstate:!0,closeOnClickOverlay:!1};let Kt=k({},zt);function Ut(){({instance:I}=Pt({setup(){const{state:t,toggle:e}=It();return()=>d(z,W(t,{"onUpdate:show":e}),null)}}))}function Vt(n){return mt?new Promise((t,e)=>{I||Ut(),I.open(k({},Kt,n,{callback:o=>{(o==="confirm"?t:e)(o)}}))}):Promise.resolve()}_(z);const a=class{constructor(t,e,o,s=1){h(this,"width");h(this,"totalGrid");this.warpEle=t,this.bg=e,this.callback=o,this.size=s,a.count=this.size+2,a.bg=this.bg,a.callback=this.callback,this.totalGrid=Math.pow(a.count,2),this.init(),this.setDifficulty(),this.createGrid()}init(){const t=this.warpEle.style,e=window.innerWidth;this.width=e*9/10,t.width=this.width+"px",t.height=this.width+"px",t.gridTemplateColumns=`repeat(${a.count}, 1fr)`,t.gridTemplateRows=`repeat(${a.count}, 1fr)`}setDifficulty(){for(let t=1;t<this.totalGrid;t++)t%a.count==0&&(a.noMoveList.push([t,t+1]),t++)}createGrid(){const t=this.width/a.count,e=Array(this.totalGrid).fill(null).map((o,s)=>{const l=s%a.count,u=Math.floor(s/a.count);return{originIndex:s,ele:document.createElement("div"),bgStyle:`url(${a.bg}) -${l*(t-5)}px -${u*(t-5)}px no-Repeat `}});a.allGrid=e.map((o,s)=>{const{originIndex:l,ele:u,bgStyle:i}=o;return new qt(this.warpEle,u,l,s,i)})}static isSuccess(){if(this.allGrid.every(e=>e.index===e.originIndex)){const e=a.allGrid.find(o=>o.isNull);e.ele.style.background=e.bgStyle,e.ele.style.backgroundSize=a.count+"00%",a.callback&&a.callback("win","")}}clearGrid(){this.warpEle.innerHTML="",a.allGrid=[]}reSet(){this.clearGrid(),this.createGrid(),this.autoMove()}autoMove(){const e=a.allGrid.find(i=>i.isNull).index,o=e-a.count>=0?e-a.count:null,s=a.noMoveList.map(i=>i.toString()).find(i=>!i.includes(e-1+"")&&!i.includes(e+""))?e-1:null;let l;const u=Math.random();console.log(u),u>.5?o===null?l=s:l=o:s===null?l=o:l=s,console.log(l),!(l===null||l<0)&&(a.allGrid[l].ele.click(),setTimeout(this.autoMove.bind(this),500))}};let c=a;h(c,"noMoveList",[]),h(c,"allGrid"),h(c,"callback"),h(c,"count"),h(c,"bg"),h(c,"Timer");class qt{constructor(t,e,o,s,l){h(this,"x");h(this,"y");h(this,"isNull");h(this,"opt");this.warpEle=t,this.ele=e,this.originIndex=o,this.index=s,this.bgStyle=l,this.init(),this.addClickGrid()}init(){this.originIndex===Math.pow(c.count,2)-1&&(this.isNull=!0),this.opt=new Yt(this),this.updatePos(),this.toWarp()}addClickGrid(){this.ele.addEventListener("click",t=>{this.opt.move(),c.callback&&c.callback("click","")})}updatePos(){this.x=this.index%c.count,this.y=Math.floor(this.index/c.count),this.ele.classList.add("pos-grid");const t=this.ele.style;t.background=this.isNull?"#FFF":"#aaa",this.isNull||(this.ele.style.background=this.bgStyle,t.transition=".5s all"),t.backgroundSize=c.count+"00%"}toWarp(){this.warpEle.append(this.ele)}InsertToWarp(t){this.warpEle.insertBefore(this.ele,c.allGrid[t+1]&&c.allGrid[t+1].ele)}removeToWarp(){this.warpEle.removeChild(this.ele)}setIndex(t){this.index=t,this.updatePos()}}class Yt{constructor(t){h(this,"num");this.grid=t,this.num=c.count}move(){if(this.grid.isNull)return;const t=c.allGrid,e=c.noMoveList,o=this.grid.index+1,s=t.find(i=>i.isNull),l=s.index+1,u=Math.abs(o-l);if(u===this.num){this.moveOpt(s,l,o);return}u===1&&e.findIndex(g=>g.includes(o)&&g.includes(l))===-1&&this.moveOpt(s,l,o)}moveOpt(t,e,o){c.allGrid.splice(e-1,1,this.grid),c.allGrid.splice(o-1,1,t),c.allGrid[o-1].InsertToWarp(o-1),c.allGrid[e-1].InsertToWarp(e-1),this.grid.setIndex(e-1),t.setIndex(o-1),console.log(`move ${e} to ${o}  `),setTimeout(()=>{c.isSuccess()},0)}}const jt=n=>(vt("data-v-81bbc255"),n=n(),wt(),n),Qt={class:"opt"},Xt=jt(()=>F("div",{class:"container"},null,-1)),Zt=y({__name:"game",setup(n){let t,e;const o=gt("bg1.jpg");function s(){t=document.querySelector(".container"),e=new c(t,o,l)}function l(i,g){i==="win"&&Vt({message:"成功啦！！"}).then(()=>{t.style.background=`url(${o}) no-Repeat`,t.style.backgroundSize="100%",e.clearGrid()}),i==="click"&&document.getElementById("audio").play()}function u(){e.reSet()}return R(()=>{s()}),(i,g)=>{const p=yt("van-button");return Bt(),pt(bt,null,[F("div",Qt,[d(p,{type:"primary",color:"#7232dd",icon:"replay",round:"",onClick:u}),d(p,{type:"primary",color:"#7232dd",icon:"music-o",round:""})]),Xt],64)}}});const ne=Et(Zt,[["__scopeId","data-v-81bbc255"]]);export{ne as default};
